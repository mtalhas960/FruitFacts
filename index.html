<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apology Page</title>
    <style>
        #message{
            word-break: break-all;
        }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-blue-200 flex flex-col items-center justify-center min-h-screen text-center">
    <div id="container" class="bg-white p-8 rounded-lg shadow-lg max-w-lg w-100">
        <img id="image" src="images/starting-img.png" alt="Apology Image" class="w-48 mx-auto">
        <h1 id="message" class="text-xl font-bold my-4">Apology Letter</h1>
        <button onclick="startApp()" class="bg-blue-500 text-white px-4 py-2 rounded-lg">Start</button>
    </div>

    <script>
        const messages = [
            "I didn't mean to hurt you, I'm truly sorry. 😢",
            "I regret my mistake, please forgive me. 🥺",
            "I promise to be better. Can we be okay again? 🥺",
            "You're very important to me. I hope you can forgive me. 🙇‍♂️"
        ];
        const questions = [
            "Can I still be Doraemon? 🥺",
            "Can you forgive this rabbit, please? 🐰",
            "Will my piyari c behna forgive me? 🤗"
        ];
        let index = 0;
        let zCount = 1;
        let questionIndex = 0;
        let responses = [];

        function startApp() {
            document.getElementById('container').innerHTML = `
                <img id="image" src="images/mid.gif" alt="Doraemon Sad" class="w-48 mx-auto">
                <h1 id="message" class="text-xl font-bold my-4">I made a mistake. Will you forgive me? 🥺</h1>
                <div id="buttons" class="mt-4 space-x-4">
                    <button onclick="respond(true)" class="bg-green-500 text-white px-4 py-2 rounded-lg">Yes 😊</button>
                    <button onclick="respond(false)" class="bg-red-500 text-white px-4 py-2 rounded-lg">No 😡</button>
                </div>
            `;
        }

        function respond(accepted) {
            responses.push({ question: document.getElementById('message').textContent, answer: accepted ? "Yes" : "No" });
            
            if (accepted) {
                document.getElementById('container').innerHTML = `
                    <img src="images/finish-img.png" alt="Doraemon Happy" class="w-48 mx-auto">
                    <h1 class="text-xl font-bold my-4">Thankooooo! You're amazing! 😃</h1>
                    <p class="text-lg" id="step">You mean so much to me, and I'm so Eppy that you forgave me. 🌸</p>
                    <button onclick="nextStep()" class="continueBtn bg-blue-500 text-white px-4 py-2 rounded-lg mt-4">Continue 😊</button>
                `;
            } else {
                if (index < messages.length) {
                    document.getElementById('message').textContent = messages[index] + " " + questions[questionIndex];
                    index++;
                    questionIndex = (questionIndex + 1) % questions.length;
                } else {
                    let extraZ = 'z'.repeat(zCount);
                    document.getElementById('message').textContent = `I won't give up! Pl${extraZ} forgive me! 😢 ` + questions[questionIndex];
                    zCount++;
                    questionIndex = (questionIndex + 1) % questions.length;
                }
            }
        }

        function nextStep() {
            const stepElement = document.getElementById('step');
            
            if (stepElement.textContent.includes("so Eppy that")) {
                stepElement.innerHTML = `But first, can you please give a bigggg smile? 😊`;
                document.querySelector('.continueBtn').style.display = 'none';
                document.getElementById('container').innerHTML += `
                    <div id="buttons" class="mt-4 space-x-4">
                        <button onclick="smileResponse(true)" class="bg-green-500 text-white px-4 py-2 rounded-lg">Yes 😊</button>
                        <button onclick="smileResponse(false)" class="bg-red-500 text-white px-4 py-2 rounded-lg">No 😡</button>
                    </div>
                `;
            } else {
                stepElement.textContent = "Yay! You smiled! That means everything to me! 😄";
                document.querySelectorAll('buttons').forEach(button => button.style.display = 'none');
            }
        }

        function smileResponse(accepted) {
            responses.push({ question: "Can you please give a bigggg smile? 😊", answer: accepted ? "Yes" : "No" });
            
            if (accepted) {
                document.getElementById('step').textContent = "Yay! You smiled! That means everything to me! 😄";
                document.getElementById('buttons').remove();
            } else {
                document.getElementById('step').textContent = "Aww, I'll try again! But first, can you please give a bigggg smile? 😊";
            }
        }
    </script>
</body>
</html>
